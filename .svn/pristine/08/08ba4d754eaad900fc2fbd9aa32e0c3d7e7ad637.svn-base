<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="http://www.springframework.org/security/tags" prefix="sec"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

<div class="page-content-wrapper border">

				<form class="row g-3" id="recruitRegiForm" action="/myPage/enterprise/recruitInsertProcess" method="post" enctype="multipart/form-data">
					<h5 class="mb-0">채용 상세</h5>
					

					<hr class="my-4">
					
					
					
					<script>

						document.addEventListener("DOMContentLoaded", function(){
		
							var checkImageBtn = document.getElementById("checkImage");
							var modal = new bootstrap.Modal(document.getElementById('checkImageModal'));
		
							checkImageBtn.addEventListener("click", function(){
								
								var xhr = new XMLHttpRequest();
								
								xhr.open("get", "/myPage/enterprise/getRecruitImage?recruitNo=${recruitVO[0].recruitNo}", true);
								
								xhr.responseType = "blob";
								xhr.onload = function(e) {
									
									if(this.status == 200){
										
										var blob = this.response;
										
										var reader = new FileReader();
										
										reader.onload = function(e) {
											
											var previewImage = document.getElementById("previewImage");
											previewImage.src = e.target.result;
											modal.show();
			
										}
										
										reader.readAsDataURL(blob);
										
									}
									
								};
								
								xhr.send();
		
							});
		
						});
		
					</script>

					<!-- First name -->
					<div class="col-12">
						<div class="row g-xl-0 align-items-center">
							<div class="col-lg-4">
								<h6 class="mb-lg-0">공고 제목 <span class="text-danger">*</span></h6>
							</div>
							<div class="col-lg-6">
								<h5 type="text" id="firstName" style="width: 95%;">${recruitVO[0].recruitTtl}</h5>
							</div>
							<div class="col-lg-2">
								<button type="button" class="input-group-text mt-2 w-50" id="checkImage">공고 파일 보기</button>
							</div>
						</div>
					</div>
					

					<!-- Gender -->
					<div class="col-12">
						<div class="row g-xl-0 align-items-center">
							<div class="col-lg-4">
								<h6 class="mb-lg-0">고용 형태 <span class="text-danger">*</span></h6>
							</div>
							<div class="col-lg-8">
								<div class="d-flex">
								<c:forEach items="${hireMap}" var="hireType">
								
									<h6 style="margin-right: 10px;">${fn:substringAfter(hireType, "=")}</h6>
								</c:forEach>
								</div>
							</div>
						</div>
					</div>
					
			

					<!-- Date of birth -->
					<div class="col-12">
						<div class="row g-xl-0 align-items-center">
							<div class="col-lg-4">
								<h6 class="mb-lg-0">접수 기간</h6>
							</div>

							<div class="col-lg-8">
							
									<style>
									/* Custom styling for the date range selector */
									/* Custom styling for the date range selector */
										.flatpickr-wrapper {
											display: flex;
											align-items: center;
										}

										.input-group-prepend {
											flex: 0 0 auto; /* 자동으로 크기를 조절하지 않음 */
										}

										.input-group-text {
											background-color: #f8f9fa;
											border: 1.5px solid #ced4da;
											height: 40px;
											width: 45px;
										
										}

										#startAndEnd {
											width: 35%;
										}
									</style>


									<div class="flatpickr-wrapper">
										<h6>${fn:substringBefore(recruitVO[0].recruitStrtDt,"T")}</h6><h6>${fn:substringAfter(recruitVO[0].recruitStrtDt,"T")}</h6>
										<i class="bi bi-dash-lg"></i>
										<h6>${fn:substringBefore(recruitVO[0].recruitEndDt,"T")}</h6><h6>${fn:substringAfter(recruitVO[0].recruitEndDt,"T")}</h6>

									</div>
							</div>
						</div>
					</div>

					<!-- Email -->
					<div class="col-12">
						<div class="row g-xl-0 align-items-center">
							<div class="col-lg-4">
								<h6 class="mb-lg-0">연봉<span class="text-danger">*</span></h6>
							</div>
							<div class="col-lg-8">
								<h6>${recruitVO[0].recruitPay}</h6>
							</div>
						</div>
					</div>
					<div class="col-12">
						<div class="row g-xl-0 align-items-center">
							<div class="col-lg-4">
								<h6 class="mb-lg-0">채용 URL <span class="text-danger">*</span></h6>
							</div>
							<div class="col-lg-8">
								<h6>${recruitVO[0].entUrl}</h6>
							</div>
						</div>
					</div>

					
			
							<!-- Gender -->
					<div class="col-12">
						<div class="row g-xl-0 align-items-center">
							<div class="col-lg-4">
								<h6 class="mb-lg-0">근무지 주소 <span class="text-danger">*</span></h6>
							</div>
							<div class="col-lg-8">
								<div class="d-flex">
								<h6 class="me-2">${recruitVO[0].cmmncdGrpCd}</h6> 
								<h6>${recruitVO[0].cmmncdNm1}</h6>
								</div>
							</div>
						</div>
					</div>
					
					
					<!-- State -->
					<div class="col-12">
						<div class="row g-xl-0 align-items-center">
							<div class="col-lg-4">
								<h6 class="mb-lg-0">모집인원 <span class="text-danger">*</span></h6>
							</div>
							<div class="col-lg-6">
								<h6>${recruitVO[0].recruitCnt}명</h6>
							</div>
						</div>
					</div>
					
					<!-- Salutation -->
					<div class="col-12 mt-4">
						<div class="row g-xl-0 align-items-center">
							<div class="col-lg-4">
								<h6 class="mb-lg-0">지원 자격 <span class="text-danger">*</span></h6>
							</div>
							<div class="career col-lg-8">
								<div class="careerlist d-flex">
									<h6 style="margin-right: 10px;">${recruitVO[0].recruitCareerCodeNm}</h6>
								</div>
							</div>
						</div>
					</div>
					
					<!-- Salutation -->
					<div class="col-12 mt-4">
						<div class="row g-xl-0 align-items-center">
							<div class="col-lg-4">
								<h6 class="mb-lg-0">수시 채용 여부 <span class="text-danger">*</span></h6>
							</div>
							<div class="career col-lg-8">
								<div class="careerlist d-flex">
								
									<c:if test="${recruitVO[0].recruitYn eq 'Y'}">
										
										<h6 style="margin-right: 10px;">동의</h6>
										
									</c:if>
									
									<c:if test="${recruitVO[0].recruitYn ne 'Y'}">
										
										<h6 style="margin-right: 10px;">비동의</h6>
										
									</c:if>
									
								</div>
							</div>
						</div>
					</div>
					
					
					<div class="col-12 mt-4">
						<div class="row g-xl-0 align-items-center">
							<div class="col-lg-4">
								<h6 class="mb-lg-0">모집 분야 <span class="text-danger">*</span></h6>
							</div>
							<!-- 라디오 버튼에 따라 필수조건 요소들이 동적으로 변하게 하기 -->
							<div class="col-lg-4">
								<div class="d-flex row checkboxlist">
									<h6 style="margin-right: 10px;">${recruitVO[0].pstnCmmncdNm}</h6>
								</div>
							</div>
						</div>
					</div>

					<div class="col-12 mt-4">
						<div class="row g-xl-0 align-items-center">
							<div class="col-lg-4">
								<h6 class="mb-lg-0">필수 조건 <span class="text-danger">*</span></h6>
							</div>

							<div class="col-lg-4">
								<div class="row">

									<div class="col-lg-6 d-flex">
										<c:forEach items="${esntlMap}" var="enstl">
										
											<h6 style="margin-right: 10px;">${fn:substringAfter(enstl, "=")}</h6>
										
										</c:forEach>
									</div>

								</div>
							</div>
						</div>
					</div>

					<div class="col-12 mt-4">
						<div class="row g-xl-0 align-items-center">
							<div class="col-lg-4">
								<h6 class="mb-lg-0">우대 언어 <span class="text-danger">*</span></h6>
							</div>

							<div class="col-lg-4">
								<div class="row">

									<div class="col-lg-6 d-flex">
										<c:forEach items="${preferMap}" var="prefer">
											<h6 style="margin-right: 10px;">${fn:substringAfter(prefer, "=")}</h6>
										 </c:forEach>
									</div>


								</div>
							</div>
						</div>
					</div>


					<!-- Divider -->
					<!-- <hr class="my-5"> -->

					<!-- Education -->
					<script type="text/javascript">
						
						document.addEventListener("DOMContentLoaded", function(){
							
							var recruitNo = "${recruitVO[0].recruitNo}";
							var pstnCmmncdNm = "${recruitVO[0].pstnCmmncdNm}";
							
							var editBtn = document.getElementById("editBtn");
							
							editBtn.addEventListener("click", function(){
								
								location.href = "/myPage/enterprise/recruitEdit?recruitNo=" + recruitNo +"&pstnCmmncdNm=" + pstnCmmncdNm;
																
							});
							
						});
					
					</script>
					<div class="col-12 text-sm-end">
						<button class="btn btn-danger mb-0" type="button" id="editBtn">수정</button>
						<button class="btn btn-info mb-0" type="button" id="cancelBtn">취소</button>
					</div>
				</form>

</div>
<div class="modal fade" id="checkImageModal" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
	<div class="modal-dialog" role="document">
	<div class="modal-content">
		<div class="modal-header">
		<h5 class="modal-title" id="modalLabel">이미지 미리보기</h5>
		</div>
		<div class="modal-body">
		<img id="previewImage" src="" alt="Image preview" class="img-fluid">
		</div>
		<div class="modal-footer">
		<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
		</div>
	</div>
	</div>
</div>
