<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://www.springframework.org/security/tags" prefix="sec" %>

	<!-- **************** MAIN CONTENT START **************** -->
	<main>
		<style>
			.darkened-image {
				filter: brightness(50%);
				/* 이미지 어둡게 조절 */
			}

			.company-header-branding-body {
				position: absolute;
				top: 60px;
				left: 350px;
				border-radius: 5px;
			}

			.company-header-name {
				color: white;
				position: absolute;
				left: 150px;
				top: 35px;
				width: 500px;
			}

			/* 탭 전체 스타일 */
			.tabs {
				margin-top: 50px;
				padding-bottom: 40px;
				background-color: #ffffff;
				border: 1px solid rgb(243, 241, 241);
				width: 1200px;
				margin: 0 auto;
			}

			/* 탭 스타일 */
			.tab_item {
				width: 200px;
				height: 50px;
				background-color: #f8f8f8;
				line-height: 50px;
				font-size: 16px;
				text-align: center;
				color: #333333;
				display: block;
				float: left;
				text-align: center;
				font-weight: bold;
				transition: all 0.2s ease;
				border-top-left-radius: 5px;
				border-top-right-radius: 5px;
			}

			.tab_item:hover {
				opacity: 0.75;
			}

			/* 라디오 버튼 UI삭제*/
			input[name="tab_item"] {
				display: none;
			}

			/* 탭 컨텐츠 스타일 */
			.tab_content {
				display: none;
				padding: 0px 40px 40px;
				clear: both;
				overflow: hidden;
			}


			/* 선택 된 탭 콘텐츠를 표시 */
			#all:checked~#all_content,
			#programming:checked~#programming_content,
			#design:checked~#design_content {
				display: block;
			}

			/* 선택된 탭 스타일 */
			.tabs input:checked+.tab_item {
				background-color: #DCD8FC;
			}

			.Create-button {
				padding: 8px 15px;
				border-radius: 5px;
				border: 1px solid #DCD8FC;
				background-color: white;
				transition: background-color 0.3s ease;
				margin-left: 650px;
				margin-top: 10px;
				/* 호버 효과를 부드럽게 만들기 위한 transition 설정 */
			}

			.Create-button:hover {
				background-color: #DCD8FC;
				/* 호버 시 배경 색상 변경 */
			}
			
			/* 목록 검색 버튼 */
.searchBtn{
  background-color: #FFE8FF;
  color: #666;
  border-radius: 5px;
  border: none;
  width: 40px; 
  height: 40px; 
  border-top-left-radius: 0; 
  border-bottom-left-radius: 0
}

/* 목록 페이징 버튼 */

.pagination-primary-soft .page-link {
  font-size: 12px; /* 페이지네이션 링크의 폰트 크기 조절 */
  padding: 8px 10px; /* 페이지네이션 버튼의 패딩을 조절하여 크기 조절 */
  color: black; /* 페이지네이션 링크 텍스트 색상 */
  background-color: red; /* 페이지네이션 배경 색상 */
  border-color: #FFE8FF; /* 페이지네이션 테두리 색상 */
}

.pagination-primary-soft .page-item.active .page-link {
  color: black;
  background-color: #f2b1f2; /* 활성화된 페이지네이션 배경 색상 */
  border-color: #FFE8FF; /* 활성화된 페이지네이션 테두리 색상 */
}

.pagination-primary-soft .page-item.disabled .page-link {
  color: black; /* 비활성화된 페이지네이션 링크 텍스트 색상 */
  pointer-events: none; /* 비활성화된 페이지네이션 클릭 이벤트 방지 */
}

.pagination-primary-soft .page-item.disabled .page-link:hover {
  background-color: #fdfdfd; /* 비활성화된 페이지네이션 호버 배경 색상 */
  border-color: #ffffff; /* 비활성화된 페이지네이션 호버 테두리 색상 */
}

.pagination-primary-soft .page-item:hover .page-link {
  background-color: #FFE8FF; /* 호버시 배경색 없애기 */
  border-color: #FFE8FF; /* 호버시 테두리 색상 */
}
		</style>

		<!-- =======================Page content START -->
		<section class="pt-0">
			<div class="company-header-container" style="padding-bottom: 50px;">
				<div class="company-header-branding background-type4">
					<div class="company-header-branding-container " style="position: relative;">
						<img src="${pageContext.request.contextPath}/resources/assets/images/entbanner.jpg" alt="Darkened Image" class="darkened-image">
						<div class="logo">
							<div class="company-header-branding-body">

								<div
									style="position: absolute; background-color: white; width: 120px; height: 120px; border-radius: 5px; display: flex; justify-content: center; align-items: center;">
									<img src="assets/images/삼성.png" alt="">
								</div>

								<div class="company-header-name">
									<div style="font-size: 40px;">${entVO.entNm }</div>
									<div class="summary-item" style="font-size: 20px;">${entVO.bizTypeNm }│ ${entVO.ksicNm }</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="tabs">
				<input id="all" type="radio" name="tab_item" checked>
				<label class="tab_item" for="all">기업게시판</label>

				<input id="programming" type="radio" name="tab_item">
				<label class="tab_item" for="programming">일반게시판</label>


				<!-- 기업게시판 목록 -->
				<div class="tab_content" id="all_content">
					<div class="table-responsive border-0">
						<table class="table table-dark-gray align-middle mb-0 table-hover">
							<div
								class="card-header bg-transparent border-bottom d-flex justify-content-between align-items-cente">
								<h3 class="mb-0" style="padding-top: 30px;">기업게시판</h3>
<!-- 								Button -->
<!-- 								<a href="/board/ent/insert" class="write-post-Btn"> -->
<!-- 									<button type="button" class="Create-button"><i class="bi bi-pencil"></i> &nbsp; 작성하기</button> -->
<!-- 								</a> -->
							</div>
							
							<c:set value="${pagingVO.dataList }" var="boardList"/>
							<c:choose>
								<c:when test="${empty boardList }">
									<tr>
										<td colspan="5">조회하신 게시글이 존재하지 않습니다.</td>
									</tr> 
								</c:when>
								<c:otherwise>
									<c:forEach items="${boardList }" var="boardVO">
											<tr>
												<td>
													<div class="conArea" style="padding-left: 30px;">
														<input type="hidden" name="bbsNo" value="${boardVO.bbsNo }">
														<a href="/board/ent/detail.do?entNo=${entVO.entNo }&bbsNo=${boardVO.bbsNo }">
															<div class="post-title" style="padding-bottom: 20px; padding-top: 10px;">
																<span class="lineOne" style="font-size: 20px; color: #000;">${boardVO.bbsTtl }</span>
															</div>
														</a>
														<div>
															<span>${boardVO.bbsWriter }</span> &nbsp; │ &nbsp;
															<span>${boardVO.bbsRegDt }</span> &nbsp; │ &nbsp;
															<i class="bi bi-eye"></i> ${boardVO.bbsInqCnt }
														</div>
													</div>
												</td>
											</tr>
									</c:forEach>
								</c:otherwise>
							</c:choose>

						</table>
					</div>
					
					
						<!-- Pagination START -->
						<div class="card-footer clearfix" id="pagingArea" >
							${pagingVO.pagingHTML }
						</div>
						<!-- Pagination END -->

						<form class="input-group input-group-sm" method="post" id="searchForm" style="max-width: 300px; margin-left: 820px; margin-top: 30px">
							<input type="hidden" name="page" id="page"/>
							<select class="form-control" name="searchType" style="border-radius: 5px; height: 40px; width: 55px; padding-right:0px; padding-left:5px;">
								<option value="title" <c:if test="${searchType eq 'title' }">selected</c:if>>제목</option>
								<option value="writer" <c:if test="${searchType eq 'writer' }">selected</c:if>>작성자</option>
							</select>
							<div style="padding: 3px;"></div>
							<div class="input-group-prepend">
								<input type="text" name="searchWord" value="${searchWord }" class="form-control" placeholder="검색" style=" max-width: 200px; border: 1px solid #ced4da; border-right: none; border-top-right-radius: 0; border-bottom-right-radius: 0;">
							</div>
							<div class="input-group-append">
								<button type="submit" class="searchBtn">
									<i class="fas fa-search"></i>
								</button>
							</div>
							<sec:csrfInput/>
						</form>
					
				</div>

				<!-- 일반게시판 목록 -->
				<div class="tab_content" id="programming_content">
					<div class="table-responsive border-0">
						<table class="table table-dark-gray align-middle p-4 mb-0 table-hover">
							<div
								class="card-header bg-transparent border-bottom d-flex justify-content-between align-items-cente">
								<h3 class="mb-0" style="padding-top: 30px;">일반게시판</h3>
								<!-- Button -->
								<!-- Button -->
								<a href="/board/ent/insert?entNo=${entVO.entNo }" class="write-post-Btn">
									<button type="button" class="Create-button"><i class="bi bi-pencil"></i> &nbsp; 작성하기</button>
								</a>
							</div>
							
							<c:set value="${pagingVO.freedataList }" var="freeboard"/>
							<c:choose>
								<c:when test="${empty freeboard }">
									<tr>
										<td colspan="5">조회하신 게시글이 존재하지 않습니다.</td>
									</tr> 
								</c:when>
								<c:otherwise>
									<c:forEach items="${freeboard }" var="boardVO">
											<tr>
												<td>
													<div class="conArea" style="padding-left: 30px;">
														<input type="hidden" name="bbsNo" value="${boardVO.bbsNo }">
														<a href="/board/ent/detail.do?entNo=${entVO.entNo }&bbsNo=${boardVO.bbsNo }">
															<div class="post-title" style="padding-bottom: 20px; padding-top: 10px;">
																<span class="lineOne" style="font-size: 20px; color: #000;">${boardVO.bbsTtl }</span>
															</div>
														</a>
														<div>
															<span>${boardVO.bbsWriter }</span> &nbsp; │ &nbsp;
															<span>${boardVO.bbsRegDt }</span> &nbsp; │ &nbsp;
															<i class="bi bi-eye"></i> ${boardVO.bbsInqCnt }
														</div>
													</div>
												</td>
											</tr>
									</c:forEach>
								</c:otherwise>
							</c:choose>
							
						
						</table>
					</div>
					
						<!-- Pagination START -->
						<div class="card-footer clearfix" id="pagingArea">
							${pagingVO.pagingHTML }
						</div>
						<!-- Pagination END -->

						<form class="input-group input-group-sm" method="post" id="searchForm" style="max-width: 300px; margin-left: 820px; margin-top: 30px">
							<input type="hidden" name="page" id="page"/>
							<select class="form-control" name="searchType" style="border-radius: 5px; height: 40px; width: 55px; padding-right:0px; padding-left:5px;">
								<option value="title" <c:if test="${searchType eq 'title' }">selected</c:if>>제목</option>
								<option value="writer" <c:if test="${searchType eq 'writer' }">selected</c:if>>작성자</option>
							</select>
							<div style="padding: 3px;"></div>
							<div class="input-group-prepend">
								<input type="text" name="searchWord" value="${searchWord }" class="form-control" placeholder="검색" style=" max-width: 200px; border: 1px solid #ced4da; border-right: none; border-top-right-radius: 0; border-bottom-right-radius: 0;">
							</div>
							<div class="input-group-append">
								<button type="submit" class="searchBtn">
									<i class="fas fa-search"></i>
								</button>
							</div>
							<sec:csrfInput/>
						</form>
				</div>
		</section>
	</main>
	
	<script type="text/javascript">
$(function(){
	var searchForm = $("#searchForm");
	var pagingArea = $("#pagingArea");
	
	pagingArea.on("click", "a", function(event){
		event.preventDefault();
		var pageNo = $(this).data("page");
		searchForm.find("#page").val(pageNo);
		searchForm.submit();
	});
});
</script>
