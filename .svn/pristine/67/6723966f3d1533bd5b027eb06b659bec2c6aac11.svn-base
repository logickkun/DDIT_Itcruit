<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core"  prefix="c"%>
	
<script>
	document.addEventListener("DOMContentLoaded", function() {
		var selectElement = document.getElementById("tabSelect");

		function activateInitialTab() {
			 
			var initialTabId = selectElement.value; //select 값 .
			var activePane = document.querySelector(initialTabId);

			if(activePane) {
				activePane.classList.add("show", "active");

				var firstSubTabLink = activePane.querySelector(".nav-link.active");
				var firstSubTabPaneId = firstSubTabLink ? firstSubTabLink.getAttribute("href") : null;
				var firstSubTabPane = firstSubTabPaneId ? document.querySelector(firstSubTabPaneId) : null;

				if(firstSubTabPane) {
					firstSubTabPane.classList.add("show", "active");
				}
			}
		}

		selectElement.addEventListener("change", function() {
			
			var tabPanes = document.querySelectorAll(".tab-pane");
		
			
			console.log("클릭");
			
			//recruitNo와 pstnCmmncdNm 을 보내야함.
			//AJAX 컨트롤러로 요청을 보낸후
			// 총 세개의 항목을 가져와야함
			
			// 채용공고에 대한 차수. 필요한 parameter 값 recruitNo, pstnCmmncdNm, 
			
			// 각 차수에 대한 지원자 리스트 필수 parameter값 1번을 던지면 1차목록 2번던지면 2차목록...
			
			// 리스트에 대한 비동기 페이징. 
			
			
			
			
			
			
			
			
			tabPanes.forEach(function(pane) {
				pane.classList.remove("show", "active");
			});

			var selectedTabId = this.value;
			var activePane = document.querySelector(selectedTabId);

			if(activePane) {
				activePane.classList.add("show", "active");

				var firstTab = activePane.querySelector(".nav-link");
				var firstTabPaneId = firstTab.getAttribute("href");
				var firstTabPane = document.querySelector(firstTabPaneId);

				if(firstTabPane) {
					activePane.querySelectorAll(".tab-pane").forEach(function(pane) {
						pane.classList.remove("show", "active");
					});
					firstTabPane.classList.add("show", "active");
				}
			}
		});

		// 페이지실행시 첫탬 복
		activateInitialTab();
	});
</script>
<style>
	.table > :not(caption) > * > * {
    	padding: 1rem 4rem;
	}

</style>
<div class="page-content-wrapper border">

		<!-- Title -->
		<div class="d-flex justify-content-flex-start mb-3" style="width: 50%;">
			<!-- <div class="col-12"> -->
				<span class="h3 me-5">채용 공고 목록</span>
				<select class="form-select" aria-label="Default select example" id="tabSelect" style="width: 50%;">
					<c:forEach items="${recruitList}" var="recruit" varStatus="status">
					    <option value="#tab-2-${status.index + 1}">${recruit.recruitTtl}</option>
					</c:forEach>
				</select>
			<!-- </div> -->
		</div>

		<div class="tab-content">
		
		<c:forEach items="${recruitList}" varStatus="index">

			<div class="tab-pane" id="tab-2-${index.index + 1}">
				
				
				<!-- 비동기로 탭을 불러와야함 각 채용공고의 프로세스 순서.+ -->
				<ul class="nav nav-tabs nav-justified mb-3">
				
					<c:forEach items="${selectApplyProcessList}" var="selectApplyProcess" varStatus="index">
						<li class="nav-item"> <a class="nav-link <c:if test="${index.index + 1 == 1 }">active</c:if>" data-bs-toggle="tab" href="#tab-3-${index.index + 1 }">${selectApplyProcess.clsNm} ${index.index + 1 }차 </a> </li>
					</c:forEach>
					
				</ul>

				<div class="tab-content">
					
					
					
					<!-- 비동기로 목록을 불러와야함. 1차 목록 -->
					<div class="tab-pane show active" id="tab-3-1">

						<div class="table-responsive border-0 ">
							<table class="table table-dark-gray align-middle p-4 mb-2 table-hover">
								<!-- Table head -->
								<thead>
									<tr>
										<th scope="col" class="border-0 rounded-start">번호</th>
										<th scope="col" class="border-0">지원자명</th>
										<th scope="col" class="border-0">이력서 열람</th>
										<th scope="col" class="border-0 rounded-end">합격여부</th>
									</tr>
								</thead>

								<!-- Table body START -->
								<tbody>
									<!-- Table row -->
									<tr>
										<!-- Table data -->
										<td>${status.index + 1}</td>

										<!-- Table data -->
										<td>
											<div class="d-flex align-items-center position-relative">
												<!-- Image -->
												<div class="avatar avatar-md">
													<img src="${pageContext.request.contextPath}/resources/assets/images/avatar/09.jpg" class="rounded-circle" alt="">
												</div>
												<div class="mb-0 ms-3">
													<!-- Title -->
													<h6 class="mb-0"><a href="admin-instructor-detail.html" class="stretched-link">테스트</a></h6>
													<span class="text-body small"><i class="fas fa-fw fa-map-marker-alt me-1 mt-1"></i>서울특별시 구로구</span>
												</div>
											</div>
										</td>

										<!-- Table data -->
										<td>
											<a href="#" class="btn btn-light btn-round me-1 mb-1 mb-md-0" data-bs-toggle="tooltip" data-bs-placement="top" title="View">
												<i class="bi bi-eye"></i>
											</a>
										</td>
										<!-- Table data -->
										<td><button type="button" class="btn btn-success">Success</button></td>
									</tr>

								</tbody>
								<!-- Table body END -->
							</table>
						</div>

						<div class="d-sm-flex justify-content-sm-between align-items-sm-center">
							<!-- Content -->
							<p class="mb-0 text-center text-sm-start">Showing 1 to 8 of 20 entries</p>
							<!-- Pagination -->
							<nav class="d-flex justify-content-center mb-0" aria-label="navigation">
								<ul class="pagination pagination-sm pagination-primary-soft mb-0 pb-0 px-0">
									<li class="page-item mb-0"><a class="page-link" href="#" tabindex="-1"><i class="fas fa-angle-left"></i></a></li>
									<li class="page-item mb-0"><a class="page-link" href="#">1</a></li>
									<li class="page-item mb-0 active"><a class="page-link" href="#">2</a></li>
									<li class="page-item mb-0"><a class="page-link" href="#">3</a></li>
									<li class="page-item mb-0"><a class="page-link" href="#"><i class="fas fa-angle-right"></i></a></li>
								</ul>
							</nav>
						</div>
					
					</div>
					
					
					
					
					
					<!-- 비동기로 목록을 불러와야함. 2차 목록  차수가 2 인 지원자.-->		
					<div class="tab-pane" id="tab-3-2">

						We pride ourselves on the service we give to our clients. Our friendly team members are always willing to help you understand your present technology requirements and provide suggestions on your future needs. It can be the packaging of an item or the design of its website and Applications.
					
					</div>
					
					<!-- 비동기로 목록을 불러와야함. 3차 목록 차수가 3인 지원자.-->
					<div class="tab-pane" id="tab-3-3">

						Eduport an innovative Internet marketing solutions company that offers comprehensive web development, SMO services, SEO strategies and various other types of Internet marketing related services. With us at your side, you will find the IT solution to achieve your strategic and financial goals.
					
					</div>
				</div>
			</div>
		</c:forEach>
	</div>
</div>