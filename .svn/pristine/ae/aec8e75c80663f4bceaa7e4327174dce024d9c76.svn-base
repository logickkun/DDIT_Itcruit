<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>
<%@ taglib uri="http://www.springframework.org/security/tags" prefix="sec" %>

<!-- Page main content START -->
<div class="page-content-wrapper border">

	<!-- Title -->
	<div class="row">
		<div class="col-12">
			<h1 class="h3 mb-2 mb-sm-0">자유게시판</h1>
		</div>
	</div>

	<!-- Card START -->
	<div class="card bg-transparent">
		<div class="row">

			<!-- 첫 번째 카드 -->
			<div class="col-md-6">
				<div class="card bg-transparent">
					<div class="card-body px-0" style="text-align: center;">
						<div>
							<h5 style="text-decoration: underline;;">게시글 신고</h5>
						</div>
						<div class="table-responsive border-0">
							<table class="table align-middle p-4 mb-0 table-hover">
								<thead>
									<tr style="background-color: #DCD8FC;">
										<th scope="col" class="border-0 rounded-start" style="color: black;">신고번호</th>
										<th scope="col" class="border-0" style="color: black;">작성자</th>
										<th scope="col" class="border-0" style="color: black;">신고사유</th>
										<th scope="col" class="border-0" style="color: black;">상세보기</th>
										<th scope="col" class="border-0 rounded-end">삭제</th>
									</tr>
								</thead>

								<tbody>
								<tr>
								    <c:set value="${pagingVO.dataList}" var="list"/>
								    <c:choose>
								        <c:when test="${empty list}">
								            <td colspan="5">없다</td>
								        </c:when>
								        <c:otherwise>
								            <c:forEach items="${list}" var="reportList">
								                <c:if test="${reportList.cmmtNo eq 0}">
								                    <tr>
								                        <td>${reportList.reportNo}</td>
								                        <td>${reportList.bbsReportId}</td>
								                        <td>${reportList.bbsReportCmmncd}</td>
								                        <td><a href="/freeBoard/detail.do?bbsNo=${reportList.bbsNo}"><button type="button" class="btn btn-secondary-soft mb-0">상세보기</button></a></td>
								                        <td>
								                            <button class="btn btn-danger-soft btn-round me-1 mb-1 mb-md-0" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="Delete">
								                                <i class="bi bi-trash"></i>
								                            </button>
								                        </td>
								                    </tr>
								                </c:if>
								            </c:forEach>
								        </c:otherwise>
								    </c:choose>
								</tr>
								</tbody>
							</table>
						</div>
					</div>
					<div class="card-footer bg-transparent p-0">
						<!-- Pagination START -->
						<div class="d-sm-flex justify-content-sm-between align-items-sm-center">
							<!-- Content -->
							<p class="mb-0 text-center text-sm-start"></p>
							<!-- Pagination -->
							<nav class="d-flex justify-content-center mb-0" aria-label="navigation">
								<ul
									class="pagination pagination-sm pagination-primary-soft d-inline-block d-md-flex rounded mb-0">
									<li class="page-item mb-0"><a class="page-link" href="#" tabindex="-1"><i
												class="fas fa-angle-left"></i></a></li>
									<li class="page-item mb-0"><a class="page-link" href="#">1</a></li>
									<li class="page-item mb-0 active"><a class="page-link" href="#">2</a></li>
									<li class="page-item mb-0"><a class="page-link" href="#">3</a></li>
									<li class="page-item mb-0"><a class="page-link" href="#"><i
												class="fas fa-angle-right"></i></a></li>
								</ul>
							</nav>
						</div>
						<!-- Pagination END -->
					</div>
				</div>
			</div>
			
			<!-- 두 번째 카드 -->
			<div class="col-md-6">
				<div class="card bg-transparent">
					<div class="card-body px-0" style="text-align: center;">
						<div>
							<h5>댓글 신고</h5>
						</div>
						<div class="table-responsive border-0">
							<table class="table align-middle p-4 mb-0 table-hover">
								<thead>
									<tr style="background-color: #DCD8FC;">
										<th scope="col" class="border-0 rounded-start" style="color: black;">신고번호</th>
										<th scope="col" class="border-0" style="color: black;">작성자</th>
										<th scope="col" class="border-0" style="color: black;">신고사유</th>
										<th scope="col" class="border-0" style="color: black;">상세보기</th>
										<th scope="col" class="border-0 rounded-end">삭제</th>
									</tr>
								</thead>

								<tbody>
								<tr>
								    <c:set value="${pagingVO.dataList}" var="list"/>
								    <c:choose>
								        <c:when test="${empty list}">
								            <td colspan="5">없다</td>
								        </c:when>
								        <c:otherwise>
								            <c:forEach items="${list}" var="reportList">
								                <c:if test="${reportList.cmmtNo ne 0}">
								                    <tr>
								                        <td>${reportList.reportNo}</td>
								                        <td>${reportList.bbsReportId}</td>
								                        <td>${reportList.bbsReportCmmncd}</td>
								                        <td>
								                        	<a href="#" class="btn btn-secondary-soft mb-0 commentReport" 
								                        		data-reportNo="${inquiryList.reportNo}" 
								                        		data-writeId="${inquiryList.writeId}" 
								                        		data-reportYmd="${inquiryList.reportYmd}"  
								                        		data-bs-toggle="modal" data-bs-target="#viewReview">상세보기
								                        	</a>
						                        		</td>
								                        <td>
								                            <button class="btn btn-danger-soft btn-round me-1 mb-1 mb-md-0" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="Delete">
								                                <i class="bi bi-trash"></i>
								                            </button>
								                        </td>
								                    </tr>
								                </c:if>
								            </c:forEach>
								        </c:otherwise>
								    </c:choose>
								</tr>
								</tbody>
							</table>
						</div>
					</div>
					<div class="card-footer bg-transparent p-0">
						<!-- Pagination START -->
						<div class="d-sm-flex justify-content-sm-between align-items-sm-center">
							<!-- Content -->
							<p class="mb-0 text-center text-sm-start"></p>
							<!-- Pagination -->
							<nav class="d-flex justify-content-center mb-0" aria-label="navigation">
								<ul
									class="pagination pagination-sm pagination-primary-soft d-inline-block d-md-flex rounded mb-0">
									<li class="page-item mb-0"><a class="page-link" href="#" tabindex="-1"><i
												class="fas fa-angle-left"></i></a></li>
									<li class="page-item mb-0"><a class="page-link" href="#">1</a></li>
									<li class="page-item mb-0 active"><a class="page-link" href="#">2</a></li>
									<li class="page-item mb-0"><a class="page-link" href="#">3</a></li>
									<li class="page-item mb-0"><a class="page-link" href="#"><i
												class="fas fa-angle-right"></i></a></li>
								</ul>
							</nav>
						</div>
						<!-- Pagination END -->
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- Card body END -->

<!-- Popup modal for reviwe START -->
<div class="modal fade" id="viewReview" tabindex="-1" aria-labelledby="viewReviewLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered">
		<div class="modal-content">
			<!-- Modal header -->
			<div class="modal-header bg-purple">
				<h5 class="modal-title text-white" id="viewReviewLabel">댓글 신고</h5>
				<button type="button" class="btn btn-sm btn-light mb-0" data-bs-dismiss="modal" aria-label="Close">
					<i class="bi bi-x-lg"></i>
				</button>
			</div>
			<!-- Modal body -->
			<div class="modal-body">
				<input type="hidden" name="bbsNo" value="${comment.bbsNo }"/>
				<input type="hidden" name="bssCmntNo" value="${comment.bssCmntNo }"/>
				<span style="font-size: 16px; font-weight: bolder;">작성자</span>
				<span style="font-size: 13px;">2024-04-25</span>
				<p id="modalContent"></p>
				<div class="commentContentA" style="border: 1px solid lightgray; padding: 5px 5px;"> 
					Lorem ipsum is a pseudo-Latin text used in web design, typography, layout, and printing in place of English to emphasise design elements over content. 
					It's also called placeholder (or filler) text. It's a convenient tool for mock-ups. 
					It helps to outline the visual elements of a document or presentation, eg typography, font, or layout. 
					Lorem ipsum is mostly a part of a Latin text by the classical author and philosopher Cicero. 
					Its words and letters have been changed by addition or removal, so to deliberately render its content nonsensical; 
					it's not genuine, correct, or comprehensible Latin anymore. 
					While lorem ipsum's still resembles classical Latin, it actually has no meaning whatsoever. 
					As Cicero's text doesn't contain the letters K, W, or Z, alien to latin, these, 
					and others are often inserted randomly to mimic the typographic appearence of European languages, 
					as are digraphs not to be found in the original.
				</div>
			</div>
		</div>
	</div>
</div>
<!-- Popup modal for reviwe END -->

<script type="text/javascript">
$(document).on("click", ".commentReport", function() {
	// 클릭한 문의의 정보 가져오기
	var reportNo = $(this).data("reportNo");
	var writeId = $(this).data("writeId");
	var reportYmd = $(this).data("reportYmd");

	// ckeditor에서 <p> 태그 제거
	var sanitizedContent = removePTags(bbsContent);

	// 모달 내용 업데이트
	$("#modalTitle").text(writeId);
	$("#modalContent").html(writeId);

	$("#bbsNo").val(bbsNo);

	// 모달이 표시될 때 textarea의 높이를 수정
	$('#viewReview').on('shown.bs.modal', function() {
		// 원하는 너비와 높이로 설정
		$('#floatingTextarea2').css({
			width : '460px', // 예시로 300px로 설정
			height : '200px' // 예시로 200px로 설정
		});
	});
});
</script>
	
